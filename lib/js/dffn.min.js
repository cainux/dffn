(function(){var c,a,g,b,f,d,i,h,e;c=window.jQuery;e=(function(){function j(){}j.cleanUp=function(){c("#__dffn_container").remove();return c("#wrap").show()};j.addStyles=function(){return c("HEAD").append("<link id='__dffn_styles' rel='stylesheet' type='text/css' href='http://dffn.azurewebsites.net/lib/css/dffn.min.css?v=1_3'>")};j.titleCase=function(k){return k.replace(/\w\S*/g,function(l){return l.charAt(0).toUpperCase()+l.substr(1).toLowerCase()})};return j})();b=(function(){function j(k,l){this.name=k;this.src=l}return j})();f=(function(){function j(k,n){var l,m;this.name=k;this.items=(function(){var q,p,o;o=[];for(q=0,p=n.length;q<p;q++){l=n[q];k=e.titleCase(l.src.replace(/^.+?\/item\//i,"").replace(/\.png$/i,"").replace(/-/g," "));m=l.src;o.push(new b(k,m))}return o})()}return j})();d=(function(){function j(k,n,m,l){this.name=k;this.level=n;this.key=m;this.skillImg=l}return j})();i=(function(){function j(o){var k,n,q,r,m,l,p;this.skills=(function(){var u,t,s;s=[];for(u=0,t=o.length;u<t;u++){l=o[u];k=c(l);q=k.parents("TR").children("TD:last").children("IMG");p=k.parents("TR").children("TD:first").children("IMG");m=k.parents("DIV.ajax-tooltip").children("H4").text();r=parseInt(k.text());if(m===""){m="Stats"}n="";if(q.length>0){n=q[0].src.replace(/^.+?key-|\.png$/g,"").toUpperCase()}s.push(new d(m,r,n,p.attr("src")))}return s})();this.skills.sort(function(t,s){if(t.level>=s.level){return 1}else{return -1}})}return j})();g=(function(){function j(l,k){this.name=l;this.url=k}return j})();a=(function(){var l,j;function k(){}k.prototype.noobify=function(){var m,o,n;e.cleanUp();n=c("TITLE").text();o=c(".build-tab:visible H2").text();m=c("      <div id='__dffn_container'>        <a class='__dffn_close'>close</a>        <h1>"+n+"</h1>        <h2>"+o+"</h2>        <div id='__dffn_itemgroups'></div>        <div id='__dffn_skills'></div>        <div id='__dffn_heroes'></div>      </div>    ");l(m);j(m);c("#wrap").hide();return c("BODY").prepend(m)};l=function(x){var t,v,m,y,A,D,C,F,s,w,u,p,o,n,z,E,B,r,q;v=c("#__dffn_itemgroups",x);m=c("#__dffn_skills",x);D=(function(){var J,H,I,G;I=c("DIV.build-tab:visible DIV.items>H4").parent();G=[];for(J=0,H=I.length;J<H;J++){t=I[J];G.push(new f(c("H4",t).text(),c("IMG",t)))}return G})();w=new i(c("DIV.build-tab:visible DIV.skill-box TD.selected.c"));if(D.length>0){for(p=0,z=D.length;p<z;p++){A=D[p];C=["<div class='__dffn_itemgroup'><h4>"+A.name+"</h4><ul>"];r=A.items;for(o=0,E=r.length;o<E;o++){y=r[o];C.push("<li><img src='"+y.src+"' /> "+y.name+"</li>")}C.push("</ul></div>");v.append(C.join(""))}}else{v.remove()}if(w.skills.length>0){u=["<h4>Hero Skills</h4><ul>"];q=w.skills;for(n=0,B=q.length;n<B;n++){s=q[n];F=s.key.length>0?"<span class='__dffn_key'>("+s.key+")</span>":"";u.push("<li><span class='__dffn_level'>"+s.level+"</span> <img src='"+s.skillImg+"'/> "+F+" "+s.name+"</li>")}u.push("</ul>");return m.append(u.join(""))}else{return m.remove()}};j=function(t){var p,o,n,r,q,s,m;p=c("#__dffn_heroes",t);n=(function(){var x,v,w,u;w=c("#footer-links .foot-links a.ajax-tooltip");u=[];for(x=0,v=w.length;x<v;x++){q=w[x];u.push(new g(q.innerText,q.href))}return u})();n.sort(function(v,u){if(v.name>u.name){return 1}else{return -1}});r=["<h4>Heroes</h4><ul>"];for(s=0,m=n.length;s<m;s++){o=n[s];r.push("<li><a href='"+o.url+"'>"+o.name+"</a></li>")}r.push("</ul>");return p.append(r.join(""))};return k})();if(!(window.dffn!=null)){c("BODY").on("click",".__dffn_close",function(j){j.preventDefault();return e.cleanUp()});e.addStyles();h=new a();h.noobify();window.dffn=h}}).call(this);