(function(){var c,a,j,g,b,f,d,i,h,e;c=window.jQuery;e=(function(){function k(){}k.cleanUp=function(){c("#__dffn_styles, #__dffn_container").remove();return c("#wrap").show()};k.addStyles=function(){return c("HEAD").append("<link id='__dffn_styles' rel='stylesheet' type='text/css' href='http://dffn.azurewebsites.net/lib/css/dffn.css?v=1_4'>")};k.titleCase=function(l){return l.replace(/\w\S*/g,function(m){return m.charAt(0).toUpperCase()+m.substr(1).toLowerCase()})};return k})();b=(function(){function k(l,m){this.name=l;this.src=m}return k})();f=(function(){function k(l,o){var m,n;this.name=l;this.items=(function(){var r,q,p;p=[];for(r=0,q=o.length;r<q;r++){m=o[r];l=e.titleCase(m.src.replace(/^.+?\/item\//i,"").replace(/\.png$/i,"").replace(/-/g," "));n=m.src;p.push(new b(l,n))}return p})()}return k})();d=(function(){function k(l,o,n,m){this.name=l;this.level=o;this.key=n;this.skillImg=m}return k})();i=(function(){function k(p){var l,o,r,s,n,m,q;this.skills=(function(){var v,u,t;t=[];for(v=0,u=p.length;v<u;v++){m=p[v];l=c(m);r=l.parents("TR").children("TD:last").children("IMG");q=l.parents("TR").children("TD:first").children("IMG");n=l.parents("DIV.ajax-tooltip").children("H4").text();s=parseInt(l.text());if(n===""){n="Stats"}o="";if(r.length>0){o=r[0].src.replace(/^.+?key-|\.png$/g,"").toUpperCase()}t.push(new d(n,s,o,q.attr("src")))}return t})();this.skills.sort(function(u,t){if(u.level>=t.level){return 1}else{return -1}})}return k})();g=(function(){function k(m,l){this.name=m;this.url=l}return k})();j=(function(){function k(m,l,p,n,o,q){this.name=m;this.url=l;this.icon=p;this.byline=n;this.rating=o;this.votes=q}return k})();a=(function(){var n,l,k;function m(){}m.prototype.noobify=function(){var o,q,p;e.cleanUp();e.addStyles();p=c("TITLE").text();q=c(".build-tab:visible H2").text();o=c("      <div id='__dffn_container'>        <a class='__dffn_close'>close</a>        <h1>"+p+"</h1>        <h2>"+q+"</h2>        <div id='__dffn_itemgroups'></div>        <div id='__dffn_skills'></div>        <div id='__dffn_guides'></div>        <div id='__dffn_heroes'></div>      </div>    ");n(o);k(o);l(o);c("#wrap").hide();return c("BODY").prepend(o)};n=function(z){var v,x,o,A,C,F,E,H,u,y,w,r,q,p,B,G,D,t,s;x=c("#__dffn_itemgroups",z);o=c("#__dffn_skills",z);F=(function(){var L,J,K,I;K=c("DIV.build-tab:visible DIV.items>H4").parent();I=[];for(L=0,J=K.length;L<J;L++){v=K[L];I.push(new f(c("H4",v).text(),c("IMG",v)))}return I})();y=new i(c("DIV.build-tab:visible DIV.skill-box TD.selected.c"));if(F.length>0){for(r=0,B=F.length;r<B;r++){C=F[r];E=["<div class='__dffn_itemgroup'><h4>"+C.name+"</h4><ul>"];t=C.items;for(q=0,G=t.length;q<G;q++){A=t[q];E.push("<li><img src='"+A.src+"' /> "+A.name+"</li>")}E.push("</ul></div>");x.append(E.join(""))}}else{x.remove()}if(y.skills.length>0){w=["<h4>Hero Skills</h4><ul>"];s=y.skills;for(p=0,D=s.length;p<D;p++){u=s[p];H=u.key.length>0?"<span class='__dffn_key'>("+u.key+")</span>":"";w.push("<li><span class='__dffn_level'>"+u.level+"</span> <img src='"+u.skillImg+"'/> "+H+" "+u.name+"</li>")}w.push("</ul>");return o.append(w.join(""))}else{return o.remove()}};k=function(v){var r,q,p,t,s,u,o;r=c("#__dffn_heroes",v);p=(function(){var z,x,y,w;y=c("#footer-links .foot-links a.ajax-tooltip");w=[];for(z=0,x=y.length;z<x;z++){s=y[z];w.push(new g(s.innerText,s.href))}return w})();p.sort(function(x,w){if(x.name>w.name){return 1}else{return -1}});t=["<h4>Heroes</h4><ul>"];for(u=0,o=p.length;u<o;u++){q=p[u];t.push("<li><a href='"+q.url+"'>"+q.name+"</a></li>")}t.push("</ul>");return r.append(t.join(""))};l=function(B){var C,v,q,r,x,w,s,y,p,t,o,A,u,z;C=c("#__dffn_guides",B);x=(function(){var G,E,F,D;F=c("DIV.list-box.hero-tab-target:visible TABLE TR");D=[];for(G=0,E=F.length;G<E;G++){r=F[G];p=c(".title A",r).text();o=c(".title A",r).attr("href");y=c(".icon IMG",r).attr("src");v=c(".byline",r).text();t=c(".score.c IMG",r).attr("src");A=c(".score.c .score-sub",r).text();D.push(new j(p,o,y,v,t,A))}return D})();if(x.length>0){s=c("DIV.hero-tab.selected.cursor:visible").text();w=["<h4>"+s+"</h4><ul>"];for(u=0,z=x.length;u<z;u++){q=x[u];w.push("          <li>            <a href='"+q.url+"'>              <div class='__dffn_guidelabel'>                <img class='__dffn_guideicon' src='"+q.icon+"' />                <img class='__dffn_guiderating' src='"+q.rating+"' />                <span class='__dffn_guidevotes'>"+(e.titleCase(q.votes))+"</span>              </div>              <div class='__dffn_guideinfo'>                <span class='__dffn_guidename' href='"+q.url+"'>"+q.name+"</span>                <span class='__dffn_guidebyline'>"+q.byline+"</span>              </div>            </a>          </li>        ")}w.push("</ul>");return C.append(w.join(""))}else{return C.remove()}};return m})();if(!(window.dffn!=null)){c("BODY").on("click",".__dffn_close",function(k){k.preventDefault();return e.cleanUp()});h=new a();h.noobify();window.dffn=h}}).call(this);